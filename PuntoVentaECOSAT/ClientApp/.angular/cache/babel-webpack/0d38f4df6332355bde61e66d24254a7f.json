{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport { startWith, map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"src/app/data/servicios/login/login.service\";\nimport * as i5 from \"@angular/material/toolbar\";\nimport * as i6 from \"@angular/flex-layout/flex\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/tooltip\";\nimport * as i9 from \"@angular/material/icon\";\nimport * as i10 from \"@angular/material/form-field\";\nimport * as i11 from \"@angular/material/input\";\nimport * as i12 from \"@angular/material/autocomplete\";\nimport * as i13 from \"@angular/common\";\nimport * as i14 from \"@angular/material/core\";\n\nfunction VentaComponent_mat_option_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-option\", 24);\n    i0.ɵɵlistener(\"onSelectionChange\", function VentaComponent_mat_option_14_Template_mat_option_onSelectionChange_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const option_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.productosSeleccionado(option_r4);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const option_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r4.descripcion);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r4.descripcion, \" \");\n  }\n}\n\nfunction VentaComponent_tr_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function VentaComponent_tr_34_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const item_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.removerProducto(item_r7);\n    });\n    i0.ɵɵelementStart(6, \"mat-icon\");\n    i0.ɵɵtext(7, \"remove\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r7.productoDescripcion);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", item_r7.cantidad, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(item_r7.importe);\n  }\n}\n\nexport class VentaComponent {\n  constructor(formBuilder, nav, http, baseUrl, loginServices) {\n    this.formBuilder = formBuilder;\n    this.nav = nav;\n    this.http = http;\n    this.baseUrl = baseUrl;\n    this.loginServices = loginServices;\n    this.totalVenta = 0;\n    this.listaSubVenta = [];\n    this.precioPrdto = 0;\n    this.controlPrdto = new FormControl();\n    this.listadoPrdto = [];\n  }\n\n  get f() {\n    return this.forma.controls;\n  }\n\n  ngOnInit() {\n    this.forma = this.formBuilder.group({\n      id: [0],\n      productoDescripcion: ['', [Validators.required]],\n      productoId: [0],\n      cantidad: [0, [Validators.required]],\n      importe: [0]\n    });\n    this.cargarProductos();\n    this.usuario = this.loginServices.obtenerLogin();\n    console.log(this.usuario.id);\n  }\n\n  guardar() {\n    if (this.listaSubVenta.length > 0) {\n      this.http.post(this.baseUrl + 'api/venta/' + this.usuario.id, this.listaSubVenta).subscribe(e => {\n        if (e.estatus) {\n          alert(e.mensaje);\n        } else {\n          alert(e.mensaje);\n        }\n      });\n    } else {\n      alert('Agrega Productos al Carrito');\n    }\n  }\n\n  agregarLista() {\n    if (this.forma.valid && this.forma) {\n      const modelo = this.forma.value;\n      const lista = this.listaSubVenta.find(e => e.productoDescripcion === modelo.productoDescripcion);\n      console.log(lista);\n\n      if (modelo.cantidad > 0) {\n        if (lista === undefined) {\n          modelo.importe = this.precioPrdto * modelo.cantidad;\n          this.totalVenta += modelo.importe;\n          this.listaSubVenta.push(modelo); // modelo.productoDescripcion=\" \";\n\n          console.log(this.listaSubVenta);\n        } else {\n          this.totalVenta -= lista.cantidad * this.precioPrdto;\n          lista.cantidad = +modelo.cantidad + +lista.cantidad;\n          lista.importe = lista.cantidad * this.precioPrdto;\n          this.totalVenta += lista.importe;\n        }\n      } else {\n        alert('Ingrese una cantidad valida');\n      }\n    }\n  }\n\n  cargarProductos() {\n    this.http.get(this.baseUrl + 'api/producto').toPromise().then(e => {\n      this.listadoPrdto = e.objeto;\n      this.filtroPrdto = this.controlPrdto.valueChanges.pipe(startWith(''), map(value => this.filtrarPrd(value)));\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  filtrarPrd(value) {\n    const valorFiltro = value.toLowerCase();\n    return this.listadoPrdto.filter(options => options.descripcion.toLowerCase().includes(valorFiltro));\n  } // limpiarFiltroProductos(): void {\n  //   this.f['productoDescripcion'].setValue('');\n  //   this.f['productoId'].setValue(null);\n  //   this.cargarProductos();\n  // }\n\n\n  productosSeleccionado(modelo) {\n    this.f['productoDescripcion'].setValue(modelo.descripcion);\n    this.f['productoId'].setValue(modelo.id);\n    this.precioPrdto = modelo.precio;\n  }\n\n  cerrar() {}\n\n  removerProducto(prdto) {\n    var dato = this.listaSubVenta.filter(e => e.productoDescripcion == prdto.productoDescripcion);\n    dato[0].cantidad = dato[0].cantidad - 1;\n\n    if (dato[0].cantidad == 0) {\n      var index = this.listaSubVenta.indexOf(dato[0]);\n      this.listaSubVenta.splice(index);\n      this.totalVenta = this.totalVenta - dato[0].importe;\n    } else {\n      var producto = this.listadoPrdto.filter(e => e.descripcion == prdto.productoDescripcion);\n      prdto.importe -= producto[0].precio;\n      this.totalVenta = this.totalVenta - producto[0].precio;\n    }\n  }\n\n}\n\nVentaComponent.ɵfac = function VentaComponent_Factory(t) {\n  return new (t || VentaComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.HttpClient), i0.ɵɵdirectiveInject('BASE_URL'), i0.ɵɵdirectiveInject(i4.LoginService));\n};\n\nVentaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: VentaComponent,\n  selectors: [[\"app-venta\"]],\n  decls: 47,\n  vars: 8,\n  consts: [[2, \"padding\", \"1%\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between center\", 1, \"toolbarCatalogo\"], [\"mat-h2\", \"\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Cerrar\", 1, \"col-md-1\"], [1, \"fuente\"], [\"fxLayout\", \"row\", \"fxLayoutGap\", \"15px\", 1, \"tcolor\"], [\"fxFlex\", \"30\"], [\"id\", \"formaProducto\", \"fxLayout\", \"column\", \"fxLayoutGap\", \"15px\", 3, \"formGroup\", \"submit\"], [\"appearance\", \"legacy\", \"fxFlex\", \"auto\"], [\"type\", \"text\", \"placeholder\", \"Seleccione una Producto\", \"matInput\", \"\", 3, \"formControl\", \"matAutocomplete\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", \"onSelectionChange\", 4, \"ngFor\", \"ngForOf\"], [\"matInput\", \"\", \"placeholder\", \"Ingrese Cantidad\", \"formControlName\", \"cantidad\", \"type\", \"number\"], [\"fxFlex\", \"auto\", \"fxLayoutAlign\", \"end center\"], [\"mat-icon-button\", \"\", \"type\", \"button\", 3, \"click\"], [\"fxFlex\", \"70\"], [2, \"width\", \"100%\"], [4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"2\"], [\"colspan\", \"1\"], [\"align\", \"end\", 1, \"col-md-12\", 2, \"margin-top\", \"2%\"], [1, \"btn\", \"btn-danger\", \"col-md-4\", 2, \"margin-right\", \"1%\", 3, \"click\"], [1, \"btn\", \"btn-success\", \"col-md-4\", 3, \"click\"], [\"formaProducto\", \"\"], [3, \"value\", \"onSelectionChange\"], [\"mat-button\", \"\", 3, \"click\"]],\n  template: function VentaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"mat-toolbar\", 1);\n      i0.ɵɵelementStart(2, \"h1\", 2);\n      i0.ɵɵtext(3, \"Carrito de Compra\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"button\", 3);\n      i0.ɵɵelementStart(5, \"mat-icon\", 4);\n      i0.ɵɵtext(6, \"clear\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 5);\n      i0.ɵɵelementStart(8, \"div\", 6);\n      i0.ɵɵelementStart(9, \"form\", 7);\n      i0.ɵɵlistener(\"submit\", function VentaComponent_Template_form_submit_9_listener() {\n        return ctx.guardar();\n      });\n      i0.ɵɵelementStart(10, \"mat-form-field\", 8);\n      i0.ɵɵelement(11, \"input\", 9);\n      i0.ɵɵelementStart(12, \"mat-autocomplete\", null, 10);\n      i0.ɵɵtemplate(14, VentaComponent_mat_option_14_Template, 2, 2, \"mat-option\", 11);\n      i0.ɵɵpipe(15, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"mat-form-field\", 8);\n      i0.ɵɵelement(17, \"input\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 13);\n      i0.ɵɵelementStart(19, \"button\", 14);\n      i0.ɵɵlistener(\"click\", function VentaComponent_Template_button_click_19_listener() {\n        return ctx.agregarLista();\n      });\n      i0.ɵɵelementStart(20, \"mat-icon\");\n      i0.ɵɵtext(21, \"add\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(22, \" Agregar \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"div\", 15);\n      i0.ɵɵelementStart(24, \"table\", 16);\n      i0.ɵɵelementStart(25, \"thead\");\n      i0.ɵɵelementStart(26, \"tr\");\n      i0.ɵɵelementStart(27, \"td\");\n      i0.ɵɵtext(28, \"Producto\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"td\");\n      i0.ɵɵtext(30, \"Cantidad\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"td\");\n      i0.ɵɵtext(32, \"Precio\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"tbody\");\n      i0.ɵɵtemplate(34, VentaComponent_tr_34_Template, 10, 3, \"tr\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"tfoot\");\n      i0.ɵɵelementStart(36, \"tr\");\n      i0.ɵɵelementStart(37, \"td\", 18);\n      i0.ɵɵtext(38, \"Total\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"td\", 19);\n      i0.ɵɵtext(40);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"div\", 20);\n      i0.ɵɵelementStart(42, \"button\", 21);\n      i0.ɵɵlistener(\"click\", function VentaComponent_Template_button_click_42_listener() {\n        return ctx.cerrar();\n      });\n      i0.ɵɵtext(43, \"Cerrar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"button\", 22, 23);\n      i0.ɵɵlistener(\"click\", function VentaComponent_Template_button_click_44_listener() {\n        return ctx.guardar();\n      });\n      i0.ɵɵtext(46, \"Guardar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(13);\n\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"formGroup\", ctx.forma);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formControl\", ctx.controlPrdto)(\"matAutocomplete\", _r0);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(15, 6, ctx.filtroPrdto));\n      i0.ɵɵadvance(20);\n      i0.ɵɵproperty(\"ngForOf\", ctx.listaSubVenta);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate1(\"$\", ctx.totalVenta, \"\");\n    }\n  },\n  directives: [i5.MatToolbar, i6.DefaultLayoutDirective, i6.DefaultLayoutAlignDirective, i7.MatButton, i8.MatTooltip, i9.MatIcon, i6.DefaultLayoutGapDirective, i6.DefaultFlexDirective, i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i10.MatFormField, i11.MatInput, i1.DefaultValueAccessor, i12.MatAutocompleteTrigger, i1.NgControlStatus, i1.FormControlDirective, i12.MatAutocomplete, i13.NgForOf, i1.NumberValueAccessor, i1.FormControlName, i14.MatOption],\n  pipes: [i13.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ2ZW50YS5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"sources":["C:/Users/Damian/source/repos/PuntoVentaECOSAT/PuntoVentaECOSAT/ClientApp/src/app/shared/venta/venta.component.ts"],"names":["FormControl","Validators","startWith","map","i0","i1","i2","i3","i4","i5","i6","i7","i8","i9","i10","i11","i12","i13","i14","VentaComponent_mat_option_14_Template","rf","ctx","_r6","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","VentaComponent_mat_option_14_Template_mat_option_onSelectionChange_0_listener","restoredCtx","ɵɵrestoreView","option_r4","$implicit","ctx_r5","ɵɵnextContext","productosSeleccionado","ɵɵtext","ɵɵelementEnd","ɵɵproperty","descripcion","ɵɵadvance","ɵɵtextInterpolate1","VentaComponent_tr_34_Template","_r9","VentaComponent_tr_34_Template_button_click_5_listener","item_r7","ctx_r8","removerProducto","ɵɵtextInterpolate","productoDescripcion","cantidad","importe","VentaComponent","constructor","formBuilder","nav","http","baseUrl","loginServices","totalVenta","listaSubVenta","precioPrdto","controlPrdto","listadoPrdto","f","forma","controls","ngOnInit","group","id","required","productoId","cargarProductos","usuario","obtenerLogin","console","log","guardar","length","post","subscribe","e","estatus","alert","mensaje","agregarLista","valid","modelo","value","lista","find","undefined","push","get","toPromise","then","objeto","filtroPrdto","valueChanges","pipe","filtrarPrd","catch","valorFiltro","toLowerCase","filter","options","includes","setValue","precio","cerrar","prdto","dato","index","indexOf","splice","producto","ɵfac","VentaComponent_Factory","t","ɵɵdirectiveInject","FormBuilder","Router","HttpClient","LoginService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","VentaComponent_Template","VentaComponent_Template_form_submit_9_listener","ɵɵelement","ɵɵtemplate","ɵɵpipe","VentaComponent_Template_button_click_19_listener","VentaComponent_Template_button_click_42_listener","VentaComponent_Template_button_click_44_listener","_r0","ɵɵreference","ɵɵpipeBind1","directives","MatToolbar","DefaultLayoutDirective","DefaultLayoutAlignDirective","MatButton","MatTooltip","MatIcon","DefaultLayoutGapDirective","DefaultFlexDirective","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","MatFormField","MatInput","DefaultValueAccessor","MatAutocompleteTrigger","NgControlStatus","FormControlDirective","MatAutocomplete","NgForOf","NumberValueAccessor","FormControlName","MatOption","pipes","AsyncPipe","styles"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,UAAtB,QAAwC,gBAAxC;AACA,SAASC,SAAT,EAAoBC,GAApB,QAA+B,gBAA/B;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,gBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,sBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,4CAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,2BAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,2BAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,0BAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,2BAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,wBAApB;AACA,OAAO,KAAKC,GAAZ,MAAqB,8BAArB;AACA,OAAO,KAAKC,GAAZ,MAAqB,yBAArB;AACA,OAAO,KAAKC,GAAZ,MAAqB,gCAArB;AACA,OAAO,KAAKC,GAAZ,MAAqB,iBAArB;AACA,OAAO,KAAKC,GAAZ,MAAqB,wBAArB;;AACA,SAASC,qCAAT,CAA+CC,EAA/C,EAAmDC,GAAnD,EAAwD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAClE,UAAME,GAAG,GAAGlB,EAAE,CAACmB,gBAAH,EAAZ;;AACAnB,IAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,YAArB,EAAmC,EAAnC;AACApB,IAAAA,EAAE,CAACqB,UAAH,CAAc,mBAAd,EAAmC,SAASC,6EAAT,GAAyF;AAAE,YAAMC,WAAW,GAAGvB,EAAE,CAACwB,aAAH,CAAiBN,GAAjB,CAApB;AAA2C,YAAMO,SAAS,GAAGF,WAAW,CAACG,SAA9B;AAAyC,YAAMC,MAAM,GAAG3B,EAAE,CAAC4B,aAAH,EAAf;AAAmC,aAAOD,MAAM,CAACE,qBAAP,CAA6BJ,SAA7B,CAAP;AAAiD,KAAtS;AACAzB,IAAAA,EAAE,CAAC8B,MAAH,CAAU,CAAV;AACA9B,IAAAA,EAAE,CAAC+B,YAAH;AACH;;AAAC,MAAIf,EAAE,GAAG,CAAT,EAAY;AACV,UAAMS,SAAS,GAAGR,GAAG,CAACS,SAAtB;AACA1B,IAAAA,EAAE,CAACgC,UAAH,CAAc,OAAd,EAAuBP,SAAS,CAACQ,WAAjC;AACAjC,IAAAA,EAAE,CAACkC,SAAH,CAAa,CAAb;AACAlC,IAAAA,EAAE,CAACmC,kBAAH,CAAsB,GAAtB,EAA2BV,SAAS,CAACQ,WAArC,EAAkD,GAAlD;AACH;AAAE;;AACH,SAASG,6BAAT,CAAuCpB,EAAvC,EAA2CC,GAA3C,EAAgD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC1D,UAAMqB,GAAG,GAAGrC,EAAE,CAACmB,gBAAH,EAAZ;;AACAnB,IAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACApB,IAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACApB,IAAAA,EAAE,CAAC8B,MAAH,CAAU,CAAV;AACA9B,IAAAA,EAAE,CAAC+B,YAAH;AACA/B,IAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACApB,IAAAA,EAAE,CAAC8B,MAAH,CAAU,CAAV;AACA9B,IAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,QAArB,EAA+B,EAA/B;AACApB,IAAAA,EAAE,CAACqB,UAAH,CAAc,OAAd,EAAuB,SAASiB,qDAAT,GAAiE;AAAE,YAAMf,WAAW,GAAGvB,EAAE,CAACwB,aAAH,CAAiBa,GAAjB,CAApB;AAA2C,YAAME,OAAO,GAAGhB,WAAW,CAACG,SAA5B;AAAuC,YAAMc,MAAM,GAAGxC,EAAE,CAAC4B,aAAH,EAAf;AAAmC,aAAOY,MAAM,CAACC,eAAP,CAAuBF,OAAvB,CAAP;AAAyC,KAAxP;AACAvC,IAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,UAArB;AACApB,IAAAA,EAAE,CAAC8B,MAAH,CAAU,CAAV,EAAa,QAAb;AACA9B,IAAAA,EAAE,CAAC+B,YAAH;AACA/B,IAAAA,EAAE,CAAC+B,YAAH;AACA/B,IAAAA,EAAE,CAAC+B,YAAH;AACA/B,IAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACApB,IAAAA,EAAE,CAAC8B,MAAH,CAAU,CAAV;AACA9B,IAAAA,EAAE,CAAC+B,YAAH;AACA/B,IAAAA,EAAE,CAAC+B,YAAH;AACH;;AAAC,MAAIf,EAAE,GAAG,CAAT,EAAY;AACV,UAAMuB,OAAO,GAAGtB,GAAG,CAACS,SAApB;AACA1B,IAAAA,EAAE,CAACkC,SAAH,CAAa,CAAb;AACAlC,IAAAA,EAAE,CAAC0C,iBAAH,CAAqBH,OAAO,CAACI,mBAA7B;AACA3C,IAAAA,EAAE,CAACkC,SAAH,CAAa,CAAb;AACAlC,IAAAA,EAAE,CAACmC,kBAAH,CAAsB,EAAtB,EAA0BI,OAAO,CAACK,QAAlC,EAA4C,GAA5C;AACA5C,IAAAA,EAAE,CAACkC,SAAH,CAAa,CAAb;AACAlC,IAAAA,EAAE,CAAC0C,iBAAH,CAAqBH,OAAO,CAACM,OAA7B;AACH;AAAE;;AACH,OAAO,MAAMC,cAAN,CAAqB;AACxBC,EAAAA,WAAW,CAACC,WAAD,EAAcC,GAAd,EAAmBC,IAAnB,EAAyBC,OAAzB,EAAkCC,aAAlC,EAAiD;AACxD,SAAKJ,WAAL,GAAmBA,WAAnB;AACA,SAAKC,GAAL,GAAWA,GAAX;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,SAAKC,aAAL,GAAqBA,aAArB;AACA,SAAKC,UAAL,GAAkB,CAAlB;AACA,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKC,WAAL,GAAmB,CAAnB;AACA,SAAKC,YAAL,GAAoB,IAAI5D,WAAJ,EAApB;AACA,SAAK6D,YAAL,GAAoB,EAApB;AACH;;AACI,MAADC,CAAC,GAAG;AAAE,WAAO,KAAKC,KAAL,CAAWC,QAAlB;AAA6B;;AACvCC,EAAAA,QAAQ,GAAG;AACP,SAAKF,KAAL,GAAa,KAAKX,WAAL,CAAiBc,KAAjB,CAAuB;AAChCC,MAAAA,EAAE,EAAE,CAAC,CAAD,CAD4B;AAEhCpB,MAAAA,mBAAmB,EAAE,CAAC,EAAD,EAAK,CAAC9C,UAAU,CAACmE,QAAZ,CAAL,CAFW;AAGhCC,MAAAA,UAAU,EAAE,CAAC,CAAD,CAHoB;AAIhCrB,MAAAA,QAAQ,EAAE,CAAC,CAAD,EAAI,CAAC/C,UAAU,CAACmE,QAAZ,CAAJ,CAJsB;AAKhCnB,MAAAA,OAAO,EAAE,CAAC,CAAD;AALuB,KAAvB,CAAb;AAOA,SAAKqB,eAAL;AACA,SAAKC,OAAL,GAAe,KAAKf,aAAL,CAAmBgB,YAAnB,EAAf;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKH,OAAL,CAAaJ,EAAzB;AACH;;AACDQ,EAAAA,OAAO,GAAG;AACN,QAAI,KAAKjB,aAAL,CAAmBkB,MAAnB,GAA4B,CAAhC,EAAmC;AAC/B,WAAKtB,IAAL,CAAUuB,IAAV,CAAe,KAAKtB,OAAL,GAAe,YAAf,GAA8B,KAAKgB,OAAL,CAAaJ,EAA1D,EAA8D,KAAKT,aAAnE,EAAkFoB,SAAlF,CAA4FC,CAAC,IAAI;AAC7F,YAAIA,CAAC,CAACC,OAAN,EAAe;AACXC,UAAAA,KAAK,CAACF,CAAC,CAACG,OAAH,CAAL;AACH,SAFD,MAGK;AACDD,UAAAA,KAAK,CAACF,CAAC,CAACG,OAAH,CAAL;AACH;AACJ,OAPD;AAQH,KATD,MAUK;AACDD,MAAAA,KAAK,CAAC,6BAAD,CAAL;AACH;AACJ;;AACDE,EAAAA,YAAY,GAAG;AACX,QAAI,KAAKpB,KAAL,CAAWqB,KAAX,IAAoB,KAAKrB,KAA7B,EAAoC;AAChC,YAAMsB,MAAM,GAAG,KAAKtB,KAAL,CAAWuB,KAA1B;AACA,YAAMC,KAAK,GAAG,KAAK7B,aAAL,CAAmB8B,IAAnB,CAAwBT,CAAC,IAAIA,CAAC,CAAChC,mBAAF,KAA0BsC,MAAM,CAACtC,mBAA9D,CAAd;AACA0B,MAAAA,OAAO,CAACC,GAAR,CAAYa,KAAZ;;AACA,UAAIF,MAAM,CAACrC,QAAP,GAAkB,CAAtB,EAAyB;AACrB,YAAIuC,KAAK,KAAKE,SAAd,EAAyB;AACrBJ,UAAAA,MAAM,CAACpC,OAAP,GAAiB,KAAKU,WAAL,GAAmB0B,MAAM,CAACrC,QAA3C;AACA,eAAKS,UAAL,IAAmB4B,MAAM,CAACpC,OAA1B;AACA,eAAKS,aAAL,CAAmBgC,IAAnB,CAAwBL,MAAxB,EAHqB,CAIrB;;AACAZ,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKhB,aAAjB;AACH,SAND,MAOK;AACD,eAAKD,UAAL,IAAmB8B,KAAK,CAACvC,QAAN,GAAiB,KAAKW,WAAzC;AACA4B,UAAAA,KAAK,CAACvC,QAAN,GAAkB,CAACqC,MAAM,CAACrC,QAAR,GAAmB,CAACuC,KAAK,CAACvC,QAA5C;AACAuC,UAAAA,KAAK,CAACtC,OAAN,GAAgBsC,KAAK,CAACvC,QAAN,GAAiB,KAAKW,WAAtC;AACA,eAAKF,UAAL,IAAmB8B,KAAK,CAACtC,OAAzB;AACH;AACJ,OAdD,MAeK;AACDgC,QAAAA,KAAK,CAAC,6BAAD,CAAL;AACH;AACJ;AACJ;;AACDX,EAAAA,eAAe,GAAG;AACd,SAAKhB,IAAL,CAAUqC,GAAV,CAAc,KAAKpC,OAAL,GAAe,cAA7B,EAA6CqC,SAA7C,GAAyDC,IAAzD,CAA8Dd,CAAC,IAAI;AAC/D,WAAKlB,YAAL,GAAoBkB,CAAC,CAACe,MAAtB;AACA,WAAKC,WAAL,GAAmB,KAAKnC,YAAL,CAAkBoC,YAAlB,CAA+BC,IAA/B,CAAoC/F,SAAS,CAAC,EAAD,CAA7C,EAAmDC,GAAG,CAACmF,KAAK,IAAI,KAAKY,UAAL,CAAgBZ,KAAhB,CAAV,CAAtD,CAAnB;AACH,KAHD,EAGGa,KAHH,CAGSpB,CAAC,IAAI;AACVN,MAAAA,OAAO,CAACC,GAAR,CAAYK,CAAZ;AACH,KALD;AAMH;;AACDmB,EAAAA,UAAU,CAACZ,KAAD,EAAQ;AACd,UAAMc,WAAW,GAAGd,KAAK,CAACe,WAAN,EAApB;AACA,WAAO,KAAKxC,YAAL,CAAkByC,MAAlB,CAAyBC,OAAO,IAAIA,OAAO,CAAClE,WAAR,CAAoBgE,WAApB,GAAkCG,QAAlC,CAA2CJ,WAA3C,CAApC,CAAP;AACH,GA7EuB,CA8ExB;AACA;AACA;AACA;AACA;;;AACAnE,EAAAA,qBAAqB,CAACoD,MAAD,EAAS;AAC1B,SAAKvB,CAAL,CAAO,qBAAP,EAA8B2C,QAA9B,CAAuCpB,MAAM,CAAChD,WAA9C;AACA,SAAKyB,CAAL,CAAO,YAAP,EAAqB2C,QAArB,CAA8BpB,MAAM,CAAClB,EAArC;AACA,SAAKR,WAAL,GAAmB0B,MAAM,CAACqB,MAA1B;AACH;;AACDC,EAAAA,MAAM,GAAG,CACR;;AACD9D,EAAAA,eAAe,CAAC+D,KAAD,EAAQ;AACnB,QAAIC,IAAI,GAAG,KAAKnD,aAAL,CAAmB4C,MAAnB,CAA0BvB,CAAC,IAAIA,CAAC,CAAChC,mBAAF,IAAyB6D,KAAK,CAAC7D,mBAA9D,CAAX;AACA8D,IAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQ7D,QAAR,GAAmB6D,IAAI,CAAC,CAAD,CAAJ,CAAQ7D,QAAR,GAAmB,CAAtC;;AACA,QAAI6D,IAAI,CAAC,CAAD,CAAJ,CAAQ7D,QAAR,IAAoB,CAAxB,EAA2B;AACvB,UAAI8D,KAAK,GAAG,KAAKpD,aAAL,CAAmBqD,OAAnB,CAA2BF,IAAI,CAAC,CAAD,CAA/B,CAAZ;AACA,WAAKnD,aAAL,CAAmBsD,MAAnB,CAA0BF,KAA1B;AACA,WAAKrD,UAAL,GAAkB,KAAKA,UAAL,GAAkBoD,IAAI,CAAC,CAAD,CAAJ,CAAQ5D,OAA5C;AACH,KAJD,MAKK;AACD,UAAIgE,QAAQ,GAAG,KAAKpD,YAAL,CAAkByC,MAAlB,CAAyBvB,CAAC,IAAIA,CAAC,CAAC1C,WAAF,IAAiBuE,KAAK,CAAC7D,mBAArD,CAAf;AACA6D,MAAAA,KAAK,CAAC3D,OAAN,IAAiBgE,QAAQ,CAAC,CAAD,CAAR,CAAYP,MAA7B;AACA,WAAKjD,UAAL,GAAkB,KAAKA,UAAL,GAAkBwD,QAAQ,CAAC,CAAD,CAAR,CAAYP,MAAhD;AACH;AACJ;;AAvGuB;;AAyG5BxD,cAAc,CAACgE,IAAf,GAAsB,SAASC,sBAAT,CAAgCC,CAAhC,EAAmC;AAAE,SAAO,KAAKA,CAAC,IAAIlE,cAAV,EAA0B9C,EAAE,CAACiH,iBAAH,CAAqBhH,EAAE,CAACiH,WAAxB,CAA1B,EAAgElH,EAAE,CAACiH,iBAAH,CAAqB/G,EAAE,CAACiH,MAAxB,CAAhE,EAAiGnH,EAAE,CAACiH,iBAAH,CAAqB9G,EAAE,CAACiH,UAAxB,CAAjG,EAAsIpH,EAAE,CAACiH,iBAAH,CAAqB,UAArB,CAAtI,EAAwKjH,EAAE,CAACiH,iBAAH,CAAqB7G,EAAE,CAACiH,YAAxB,CAAxK,CAAP;AAAwN,CAAnR;;AACAvE,cAAc,CAACwE,IAAf,GAAsB,aAActH,EAAE,CAACuH,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAE1E,cAAR;AAAwB2E,EAAAA,SAAS,EAAE,CAAC,CAAC,WAAD,CAAD,CAAnC;AAAoDC,EAAAA,KAAK,EAAE,EAA3D;AAA+DC,EAAAA,IAAI,EAAE,CAArE;AAAwEC,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,SAAJ,EAAe,IAAf,CAAD,EAAuB,CAAC,UAAD,EAAa,KAAb,EAAoB,eAApB,EAAqC,sBAArC,EAA6D,CAA7D,EAAgE,iBAAhE,CAAvB,EAA2G,CAAC,QAAD,EAAW,EAAX,CAA3G,EAA2H,CAAC,iBAAD,EAAoB,EAApB,EAAwB,YAAxB,EAAsC,QAAtC,EAAgD,CAAhD,EAAmD,UAAnD,CAA3H,EAA2L,CAAC,CAAD,EAAI,QAAJ,CAA3L,EAA0M,CAAC,UAAD,EAAa,KAAb,EAAoB,aAApB,EAAmC,MAAnC,EAA2C,CAA3C,EAA8C,QAA9C,CAA1M,EAAmQ,CAAC,QAAD,EAAW,IAAX,CAAnQ,EAAqR,CAAC,IAAD,EAAO,eAAP,EAAwB,UAAxB,EAAoC,QAApC,EAA8C,aAA9C,EAA6D,MAA7D,EAAqE,CAArE,EAAwE,WAAxE,EAAqF,QAArF,CAArR,EAAqX,CAAC,YAAD,EAAe,QAAf,EAAyB,QAAzB,EAAmC,MAAnC,CAArX,EAAia,CAAC,MAAD,EAAS,MAAT,EAAiB,aAAjB,EAAgC,yBAAhC,EAA2D,UAA3D,EAAuE,EAAvE,EAA2E,CAA3E,EAA8E,aAA9E,EAA6F,iBAA7F,CAAja,EAAkhB,CAAC,MAAD,EAAS,iBAAT,CAAlhB,EAA+iB,CAAC,CAAD,EAAI,OAAJ,EAAa,mBAAb,EAAkC,CAAlC,EAAqC,OAArC,EAA8C,SAA9C,CAA/iB,EAAymB,CAAC,UAAD,EAAa,EAAb,EAAiB,aAAjB,EAAgC,kBAAhC,EAAoD,iBAApD,EAAuE,UAAvE,EAAmF,MAAnF,EAA2F,QAA3F,CAAzmB,EAA+sB,CAAC,QAAD,EAAW,MAAX,EAAmB,eAAnB,EAAoC,YAApC,CAA/sB,EAAkwB,CAAC,iBAAD,EAAoB,EAApB,EAAwB,MAAxB,EAAgC,QAAhC,EAA0C,CAA1C,EAA6C,OAA7C,CAAlwB,EAAyzB,CAAC,QAAD,EAAW,IAAX,CAAzzB,EAA20B,CAAC,CAAD,EAAI,OAAJ,EAAa,MAAb,CAA30B,EAAi2B,CAAC,CAAD,EAAI,OAAJ,EAAa,SAAb,CAAj2B,EAA03B,CAAC,SAAD,EAAY,GAAZ,CAA13B,EAA44B,CAAC,SAAD,EAAY,GAAZ,CAA54B,EAA85B,CAAC,OAAD,EAAU,KAAV,EAAiB,CAAjB,EAAoB,WAApB,EAAiC,CAAjC,EAAoC,YAApC,EAAkD,IAAlD,CAA95B,EAAu9B,CAAC,CAAD,EAAI,KAAJ,EAAW,YAAX,EAAyB,UAAzB,EAAqC,CAArC,EAAwC,cAAxC,EAAwD,IAAxD,EAA8D,CAA9D,EAAiE,OAAjE,CAAv9B,EAAkiC,CAAC,CAAD,EAAI,KAAJ,EAAW,aAAX,EAA0B,UAA1B,EAAsC,CAAtC,EAAyC,OAAzC,CAAliC,EAAqlC,CAAC,eAAD,EAAkB,EAAlB,CAArlC,EAA4mC,CAAC,CAAD,EAAI,OAAJ,EAAa,mBAAb,CAA5mC,EAA+oC,CAAC,YAAD,EAAe,EAAf,EAAmB,CAAnB,EAAsB,OAAtB,CAA/oC,CAAhF;AAAgwCC,EAAAA,QAAQ,EAAE,SAASC,uBAAT,CAAiC9G,EAAjC,EAAqCC,GAArC,EAA0C;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AACn3ChB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACApB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,aAArB,EAAoC,CAApC;AACApB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,IAArB,EAA2B,CAA3B;AACApB,MAAAA,EAAE,CAAC8B,MAAH,CAAU,CAAV,EAAa,mBAAb;AACA9B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,QAArB,EAA+B,CAA/B;AACApB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,UAArB,EAAiC,CAAjC;AACApB,MAAAA,EAAE,CAAC8B,MAAH,CAAU,CAAV,EAAa,OAAb;AACA9B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACApB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACApB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,CAAlB,EAAqB,MAArB,EAA6B,CAA7B;AACApB,MAAAA,EAAE,CAACqB,UAAH,CAAc,QAAd,EAAwB,SAAS0G,8CAAT,GAA0D;AAAE,eAAO9G,GAAG,CAACsD,OAAJ,EAAP;AAAuB,OAA3G;AACAvE,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,gBAAtB,EAAwC,CAAxC;AACApB,MAAAA,EAAE,CAACgI,SAAH,CAAa,EAAb,EAAiB,OAAjB,EAA0B,CAA1B;AACAhI,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,kBAAtB,EAA0C,IAA1C,EAAgD,EAAhD;AACApB,MAAAA,EAAE,CAACiI,UAAH,CAAc,EAAd,EAAkBlH,qCAAlB,EAAyD,CAAzD,EAA4D,CAA5D,EAA+D,YAA/D,EAA6E,EAA7E;AACAf,MAAAA,EAAE,CAACkI,MAAH,CAAU,EAAV,EAAc,OAAd;AACAlI,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,gBAAtB,EAAwC,CAAxC;AACApB,MAAAA,EAAE,CAACgI,SAAH,CAAa,EAAb,EAAiB,OAAjB,EAA0B,EAA1B;AACAhI,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,KAAtB,EAA6B,EAA7B;AACApB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,QAAtB,EAAgC,EAAhC;AACApB,MAAAA,EAAE,CAACqB,UAAH,CAAc,OAAd,EAAuB,SAAS8G,gDAAT,GAA4D;AAAE,eAAOlH,GAAG,CAAC8D,YAAJ,EAAP;AAA4B,OAAjH;AACA/E,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,UAAtB;AACApB,MAAAA,EAAE,CAAC8B,MAAH,CAAU,EAAV,EAAc,KAAd;AACA9B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC8B,MAAH,CAAU,EAAV,EAAc,WAAd;AACA9B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,KAAtB,EAA6B,EAA7B;AACApB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,OAAtB,EAA+B,EAA/B;AACApB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,OAAtB;AACApB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACApB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACApB,MAAAA,EAAE,CAAC8B,MAAH,CAAU,EAAV,EAAc,UAAd;AACA9B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACApB,MAAAA,EAAE,CAAC8B,MAAH,CAAU,EAAV,EAAc,UAAd;AACA9B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACApB,MAAAA,EAAE,CAAC8B,MAAH,CAAU,EAAV,EAAc,QAAd;AACA9B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,OAAtB;AACApB,MAAAA,EAAE,CAACiI,UAAH,CAAc,EAAd,EAAkB7F,6BAAlB,EAAiD,EAAjD,EAAqD,CAArD,EAAwD,IAAxD,EAA8D,EAA9D;AACApC,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,OAAtB;AACApB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACApB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,EAA5B;AACApB,MAAAA,EAAE,CAAC8B,MAAH,CAAU,EAAV,EAAc,OAAd;AACA9B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,EAA5B;AACApB,MAAAA,EAAE,CAAC8B,MAAH,CAAU,EAAV;AACA9B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,KAAtB,EAA6B,EAA7B;AACApB,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,QAAtB,EAAgC,EAAhC;AACApB,MAAAA,EAAE,CAACqB,UAAH,CAAc,OAAd,EAAuB,SAAS+G,gDAAT,GAA4D;AAAE,eAAOnH,GAAG,CAACsF,MAAJ,EAAP;AAAsB,OAA3G;AACAvG,MAAAA,EAAE,CAAC8B,MAAH,CAAU,EAAV,EAAc,QAAd;AACA9B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAACoB,cAAH,CAAkB,EAAlB,EAAsB,QAAtB,EAAgC,EAAhC,EAAoC,EAApC;AACApB,MAAAA,EAAE,CAACqB,UAAH,CAAc,OAAd,EAAuB,SAASgH,gDAAT,GAA4D;AAAE,eAAOpH,GAAG,CAACsD,OAAJ,EAAP;AAAuB,OAA5G;AACAvE,MAAAA,EAAE,CAAC8B,MAAH,CAAU,EAAV,EAAc,SAAd;AACA9B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACA/B,MAAAA,EAAE,CAAC+B,YAAH;AACH;;AAAC,QAAIf,EAAE,GAAG,CAAT,EAAY;AACV,YAAMsH,GAAG,GAAGtI,EAAE,CAACuI,WAAH,CAAe,EAAf,CAAZ;;AACAvI,MAAAA,EAAE,CAACkC,SAAH,CAAa,CAAb;AACAlC,MAAAA,EAAE,CAACgC,UAAH,CAAc,WAAd,EAA2Bf,GAAG,CAAC0C,KAA/B;AACA3D,MAAAA,EAAE,CAACkC,SAAH,CAAa,CAAb;AACAlC,MAAAA,EAAE,CAACgC,UAAH,CAAc,aAAd,EAA6Bf,GAAG,CAACuC,YAAjC,EAA+C,iBAA/C,EAAkE8E,GAAlE;AACAtI,MAAAA,EAAE,CAACkC,SAAH,CAAa,CAAb;AACAlC,MAAAA,EAAE,CAACgC,UAAH,CAAc,SAAd,EAAyBhC,EAAE,CAACwI,WAAH,CAAe,EAAf,EAAmB,CAAnB,EAAsBvH,GAAG,CAAC0E,WAA1B,CAAzB;AACA3F,MAAAA,EAAE,CAACkC,SAAH,CAAa,EAAb;AACAlC,MAAAA,EAAE,CAACgC,UAAH,CAAc,SAAd,EAAyBf,GAAG,CAACqC,aAA7B;AACAtD,MAAAA,EAAE,CAACkC,SAAH,CAAa,CAAb;AACAlC,MAAAA,EAAE,CAACmC,kBAAH,CAAsB,GAAtB,EAA2BlB,GAAG,CAACoC,UAA/B,EAA2C,EAA3C;AACH;AAAE,GA3FkD;AA2FhDoF,EAAAA,UAAU,EAAE,CAACpI,EAAE,CAACqI,UAAJ,EAAgBpI,EAAE,CAACqI,sBAAnB,EAA2CrI,EAAE,CAACsI,2BAA9C,EAA2ErI,EAAE,CAACsI,SAA9E,EAAyFrI,EAAE,CAACsI,UAA5F,EAAwGrI,EAAE,CAACsI,OAA3G,EAAoHzI,EAAE,CAAC0I,yBAAvH,EAAkJ1I,EAAE,CAAC2I,oBAArJ,EAA2KhJ,EAAE,CAACiJ,aAA9K,EAA6LjJ,EAAE,CAACkJ,oBAAhM,EAAsNlJ,EAAE,CAACmJ,kBAAzN,EAA6O1I,GAAG,CAAC2I,YAAjP,EAA+P1I,GAAG,CAAC2I,QAAnQ,EAA6QrJ,EAAE,CAACsJ,oBAAhR,EAAsS3I,GAAG,CAAC4I,sBAA1S,EAAkUvJ,EAAE,CAACwJ,eAArU,EAAsVxJ,EAAE,CAACyJ,oBAAzV,EAA+W9I,GAAG,CAAC+I,eAAnX,EAAoY9I,GAAG,CAAC+I,OAAxY,EAAiZ3J,EAAE,CAAC4J,mBAApZ,EAAya5J,EAAE,CAAC6J,eAA5a,EAA6bhJ,GAAG,CAACiJ,SAAjc,CA3FoC;AA2FyaC,EAAAA,KAAK,EAAE,CAACnJ,GAAG,CAACoJ,SAAL,CA3Fhb;AA2FicC,EAAAA,MAAM,EAAE,CAAC,qKAAD;AA3Fzc,CAArB,CAApC","sourcesContent":["import { FormControl, Validators } from '@angular/forms';\r\nimport { startWith, map } from 'rxjs/operators';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/forms\";\r\nimport * as i2 from \"@angular/router\";\r\nimport * as i3 from \"@angular/common/http\";\r\nimport * as i4 from \"src/app/data/servicios/login/login.service\";\r\nimport * as i5 from \"@angular/material/toolbar\";\r\nimport * as i6 from \"@angular/flex-layout/flex\";\r\nimport * as i7 from \"@angular/material/button\";\r\nimport * as i8 from \"@angular/material/tooltip\";\r\nimport * as i9 from \"@angular/material/icon\";\r\nimport * as i10 from \"@angular/material/form-field\";\r\nimport * as i11 from \"@angular/material/input\";\r\nimport * as i12 from \"@angular/material/autocomplete\";\r\nimport * as i13 from \"@angular/common\";\r\nimport * as i14 from \"@angular/material/core\";\r\nfunction VentaComponent_mat_option_14_Template(rf, ctx) { if (rf & 1) {\r\n    const _r6 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"mat-option\", 24);\r\n    i0.ɵɵlistener(\"onSelectionChange\", function VentaComponent_mat_option_14_Template_mat_option_onSelectionChange_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r6); const option_r4 = restoredCtx.$implicit; const ctx_r5 = i0.ɵɵnextContext(); return ctx_r5.productosSeleccionado(option_r4); });\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const option_r4 = ctx.$implicit;\r\n    i0.ɵɵproperty(\"value\", option_r4.descripcion);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" \", option_r4.descripcion, \" \");\r\n} }\r\nfunction VentaComponent_tr_34_Template(rf, ctx) { if (rf & 1) {\r\n    const _r9 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"tr\");\r\n    i0.ɵɵelementStart(1, \"td\");\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(3, \"td\");\r\n    i0.ɵɵtext(4);\r\n    i0.ɵɵelementStart(5, \"button\", 25);\r\n    i0.ɵɵlistener(\"click\", function VentaComponent_tr_34_Template_button_click_5_listener() { const restoredCtx = i0.ɵɵrestoreView(_r9); const item_r7 = restoredCtx.$implicit; const ctx_r8 = i0.ɵɵnextContext(); return ctx_r8.removerProducto(item_r7); });\r\n    i0.ɵɵelementStart(6, \"mat-icon\");\r\n    i0.ɵɵtext(7, \"remove\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(8, \"td\");\r\n    i0.ɵɵtext(9);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const item_r7 = ctx.$implicit;\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(item_r7.productoDescripcion);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\"\", item_r7.cantidad, \" \");\r\n    i0.ɵɵadvance(5);\r\n    i0.ɵɵtextInterpolate(item_r7.importe);\r\n} }\r\nexport class VentaComponent {\r\n    constructor(formBuilder, nav, http, baseUrl, loginServices) {\r\n        this.formBuilder = formBuilder;\r\n        this.nav = nav;\r\n        this.http = http;\r\n        this.baseUrl = baseUrl;\r\n        this.loginServices = loginServices;\r\n        this.totalVenta = 0;\r\n        this.listaSubVenta = [];\r\n        this.precioPrdto = 0;\r\n        this.controlPrdto = new FormControl();\r\n        this.listadoPrdto = [];\r\n    }\r\n    get f() { return this.forma.controls; }\r\n    ngOnInit() {\r\n        this.forma = this.formBuilder.group({\r\n            id: [0],\r\n            productoDescripcion: ['', [Validators.required]],\r\n            productoId: [0],\r\n            cantidad: [0, [Validators.required]],\r\n            importe: [0],\r\n        });\r\n        this.cargarProductos();\r\n        this.usuario = this.loginServices.obtenerLogin();\r\n        console.log(this.usuario.id);\r\n    }\r\n    guardar() {\r\n        if (this.listaSubVenta.length > 0) {\r\n            this.http.post(this.baseUrl + 'api/venta/' + this.usuario.id, this.listaSubVenta).subscribe(e => {\r\n                if (e.estatus) {\r\n                    alert(e.mensaje);\r\n                }\r\n                else {\r\n                    alert(e.mensaje);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            alert('Agrega Productos al Carrito');\r\n        }\r\n    }\r\n    agregarLista() {\r\n        if (this.forma.valid && this.forma) {\r\n            const modelo = this.forma.value;\r\n            const lista = this.listaSubVenta.find(e => e.productoDescripcion === modelo.productoDescripcion);\r\n            console.log(lista);\r\n            if (modelo.cantidad > 0) {\r\n                if (lista === undefined) {\r\n                    modelo.importe = this.precioPrdto * modelo.cantidad;\r\n                    this.totalVenta += modelo.importe;\r\n                    this.listaSubVenta.push(modelo);\r\n                    // modelo.productoDescripcion=\" \";\r\n                    console.log(this.listaSubVenta);\r\n                }\r\n                else {\r\n                    this.totalVenta -= lista.cantidad * this.precioPrdto;\r\n                    lista.cantidad = (+modelo.cantidad + +lista.cantidad);\r\n                    lista.importe = lista.cantidad * this.precioPrdto;\r\n                    this.totalVenta += lista.importe;\r\n                }\r\n            }\r\n            else {\r\n                alert('Ingrese una cantidad valida');\r\n            }\r\n        }\r\n    }\r\n    cargarProductos() {\r\n        this.http.get(this.baseUrl + 'api/producto').toPromise().then(e => {\r\n            this.listadoPrdto = e.objeto;\r\n            this.filtroPrdto = this.controlPrdto.valueChanges.pipe(startWith(''), map(value => this.filtrarPrd(value)));\r\n        }).catch(e => {\r\n            console.log(e);\r\n        });\r\n    }\r\n    filtrarPrd(value) {\r\n        const valorFiltro = value.toLowerCase();\r\n        return this.listadoPrdto.filter(options => options.descripcion.toLowerCase().includes(valorFiltro));\r\n    }\r\n    // limpiarFiltroProductos(): void {\r\n    //   this.f['productoDescripcion'].setValue('');\r\n    //   this.f['productoId'].setValue(null);\r\n    //   this.cargarProductos();\r\n    // }\r\n    productosSeleccionado(modelo) {\r\n        this.f['productoDescripcion'].setValue(modelo.descripcion);\r\n        this.f['productoId'].setValue(modelo.id);\r\n        this.precioPrdto = modelo.precio;\r\n    }\r\n    cerrar() {\r\n    }\r\n    removerProducto(prdto) {\r\n        var dato = this.listaSubVenta.filter(e => e.productoDescripcion == prdto.productoDescripcion);\r\n        dato[0].cantidad = dato[0].cantidad - 1;\r\n        if (dato[0].cantidad == 0) {\r\n            var index = this.listaSubVenta.indexOf(dato[0]);\r\n            this.listaSubVenta.splice(index);\r\n            this.totalVenta = this.totalVenta - dato[0].importe;\r\n        }\r\n        else {\r\n            var producto = this.listadoPrdto.filter(e => e.descripcion == prdto.productoDescripcion);\r\n            prdto.importe -= producto[0].precio;\r\n            this.totalVenta = this.totalVenta - producto[0].precio;\r\n        }\r\n    }\r\n}\r\nVentaComponent.ɵfac = function VentaComponent_Factory(t) { return new (t || VentaComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.HttpClient), i0.ɵɵdirectiveInject('BASE_URL'), i0.ɵɵdirectiveInject(i4.LoginService)); };\r\nVentaComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: VentaComponent, selectors: [[\"app-venta\"]], decls: 47, vars: 8, consts: [[2, \"padding\", \"1%\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between center\", 1, \"toolbarCatalogo\"], [\"mat-h2\", \"\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Cerrar\", 1, \"col-md-1\"], [1, \"fuente\"], [\"fxLayout\", \"row\", \"fxLayoutGap\", \"15px\", 1, \"tcolor\"], [\"fxFlex\", \"30\"], [\"id\", \"formaProducto\", \"fxLayout\", \"column\", \"fxLayoutGap\", \"15px\", 3, \"formGroup\", \"submit\"], [\"appearance\", \"legacy\", \"fxFlex\", \"auto\"], [\"type\", \"text\", \"placeholder\", \"Seleccione una Producto\", \"matInput\", \"\", 3, \"formControl\", \"matAutocomplete\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", \"onSelectionChange\", 4, \"ngFor\", \"ngForOf\"], [\"matInput\", \"\", \"placeholder\", \"Ingrese Cantidad\", \"formControlName\", \"cantidad\", \"type\", \"number\"], [\"fxFlex\", \"auto\", \"fxLayoutAlign\", \"end center\"], [\"mat-icon-button\", \"\", \"type\", \"button\", 3, \"click\"], [\"fxFlex\", \"70\"], [2, \"width\", \"100%\"], [4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"2\"], [\"colspan\", \"1\"], [\"align\", \"end\", 1, \"col-md-12\", 2, \"margin-top\", \"2%\"], [1, \"btn\", \"btn-danger\", \"col-md-4\", 2, \"margin-right\", \"1%\", 3, \"click\"], [1, \"btn\", \"btn-success\", \"col-md-4\", 3, \"click\"], [\"formaProducto\", \"\"], [3, \"value\", \"onSelectionChange\"], [\"mat-button\", \"\", 3, \"click\"]], template: function VentaComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"mat-toolbar\", 1);\r\n        i0.ɵɵelementStart(2, \"h1\", 2);\r\n        i0.ɵɵtext(3, \"Carrito de Compra\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(4, \"button\", 3);\r\n        i0.ɵɵelementStart(5, \"mat-icon\", 4);\r\n        i0.ɵɵtext(6, \"clear\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"div\", 5);\r\n        i0.ɵɵelementStart(8, \"div\", 6);\r\n        i0.ɵɵelementStart(9, \"form\", 7);\r\n        i0.ɵɵlistener(\"submit\", function VentaComponent_Template_form_submit_9_listener() { return ctx.guardar(); });\r\n        i0.ɵɵelementStart(10, \"mat-form-field\", 8);\r\n        i0.ɵɵelement(11, \"input\", 9);\r\n        i0.ɵɵelementStart(12, \"mat-autocomplete\", null, 10);\r\n        i0.ɵɵtemplate(14, VentaComponent_mat_option_14_Template, 2, 2, \"mat-option\", 11);\r\n        i0.ɵɵpipe(15, \"async\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(16, \"mat-form-field\", 8);\r\n        i0.ɵɵelement(17, \"input\", 12);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(18, \"div\", 13);\r\n        i0.ɵɵelementStart(19, \"button\", 14);\r\n        i0.ɵɵlistener(\"click\", function VentaComponent_Template_button_click_19_listener() { return ctx.agregarLista(); });\r\n        i0.ɵɵelementStart(20, \"mat-icon\");\r\n        i0.ɵɵtext(21, \"add\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtext(22, \" Agregar \");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(23, \"div\", 15);\r\n        i0.ɵɵelementStart(24, \"table\", 16);\r\n        i0.ɵɵelementStart(25, \"thead\");\r\n        i0.ɵɵelementStart(26, \"tr\");\r\n        i0.ɵɵelementStart(27, \"td\");\r\n        i0.ɵɵtext(28, \"Producto\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(29, \"td\");\r\n        i0.ɵɵtext(30, \"Cantidad\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(31, \"td\");\r\n        i0.ɵɵtext(32, \"Precio\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(33, \"tbody\");\r\n        i0.ɵɵtemplate(34, VentaComponent_tr_34_Template, 10, 3, \"tr\", 17);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(35, \"tfoot\");\r\n        i0.ɵɵelementStart(36, \"tr\");\r\n        i0.ɵɵelementStart(37, \"td\", 18);\r\n        i0.ɵɵtext(38, \"Total\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(39, \"td\", 19);\r\n        i0.ɵɵtext(40);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(41, \"div\", 20);\r\n        i0.ɵɵelementStart(42, \"button\", 21);\r\n        i0.ɵɵlistener(\"click\", function VentaComponent_Template_button_click_42_listener() { return ctx.cerrar(); });\r\n        i0.ɵɵtext(43, \"Cerrar\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(44, \"button\", 22, 23);\r\n        i0.ɵɵlistener(\"click\", function VentaComponent_Template_button_click_44_listener() { return ctx.guardar(); });\r\n        i0.ɵɵtext(46, \"Guardar\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        const _r0 = i0.ɵɵreference(13);\r\n        i0.ɵɵadvance(9);\r\n        i0.ɵɵproperty(\"formGroup\", ctx.forma);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"formControl\", ctx.controlPrdto)(\"matAutocomplete\", _r0);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(15, 6, ctx.filtroPrdto));\r\n        i0.ɵɵadvance(20);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.listaSubVenta);\r\n        i0.ɵɵadvance(6);\r\n        i0.ɵɵtextInterpolate1(\"$\", ctx.totalVenta, \"\");\r\n    } }, directives: [i5.MatToolbar, i6.DefaultLayoutDirective, i6.DefaultLayoutAlignDirective, i7.MatButton, i8.MatTooltip, i9.MatIcon, i6.DefaultLayoutGapDirective, i6.DefaultFlexDirective, i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i10.MatFormField, i11.MatInput, i1.DefaultValueAccessor, i12.MatAutocompleteTrigger, i1.NgControlStatus, i1.FormControlDirective, i12.MatAutocomplete, i13.NgForOf, i1.NumberValueAccessor, i1.FormControlName, i14.MatOption], pipes: [i13.AsyncPipe], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ2ZW50YS5jb21wb25lbnQuY3NzIn0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}